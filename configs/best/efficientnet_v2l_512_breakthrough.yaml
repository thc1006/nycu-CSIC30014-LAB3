# ğŸ† å† è»æ–¹æ¡ˆï¼šEfficientNet-V2-L @ 512Ã—512
# åŸºæ–¼ SIIM COVID-19 Detection Top 5 solutions
# é æœŸåˆ†æ•¸ï¼š88.5-89.5% (å–®æ¨¡å‹)ï¼Œé›†æˆå¾Œ 89.5-90.5%

data:
  train_csv: data/fold{fold}_train_with_pseudo.csv  # ä½¿ç”¨å½æ¨™ç±¤å¢å¼·
  val_csv: data/fold{fold}_val.csv
  file_col: new_filename
  label_cols: [normal, bacteria, virus, COVID-19]
  images_dir_train: data/train
  images_dir_val: data/train
  images_dir_test: data/test_images
  test_csv: data/sample_submission.csv
  num_classes: 4
  submission_cols: [normal, bacteria, virus, COVID-19]
  submission_file_col: new_filename

model:
  name: efficientnet_v2_l  # ğŸ”¥ æ›´å¤§æ¨¡å‹ (119M params vs V2-S 21M)
  img_size: 512  # ğŸ”¥ æ›´é«˜è§£æåº¦ (512 vs 384)
  dropout: 0.30  # å¢åŠ  dropout é˜²æ­¢éæ“¬åˆ
  drop_path_rate: 0.2  # Stochastic Depth

train:
  epochs: 40  # æ›´å¤š epochs åˆ©ç”¨å¤§æ¨¡å‹å®¹é‡
  batch_size: 4  # ğŸ”¥ é€²ä¸€æ­¥é™ä½ (V2-L @ 512 éå¸¸å¤§)
  lr: 0.0001  # é©ä¸­å­¸ç¿’ç‡
  optimizer: adamw
  weight_decay: 0.0002  # å¼·æ­£å‰‡åŒ–
  patience: 15  # æ›´å¤§è€å¿ƒ
  seed: 42
  num_workers: 4
  use_amp: true  # å¿…é ˆç”¨ AMP ç¯€çœè¨˜æ†¶é«”
  use_compile: false  # V2-L å¯èƒ½ä¸å…¼å®¹
  channels_last: true  # è¨˜æ†¶é«”å„ªåŒ–
  gradient_clip: 1.0  # æ¢¯åº¦è£å‰ª

# æ•¸æ“šå¢å¼· - å† è»ç´šåˆ¥
augmentation:
  mixup_prob: 0.7  # ğŸ”¥ æ›´æ¿€é€² Mixup
  mixup_alpha: 1.5  # æ›´å¼·æ··åˆ
  cutmix_prob: 0.5
  aug_rotation: 20  # æ›´å¤§æ—‹è½‰
  aug_scale: [0.85, 1.15]  # æ›´å¯¬ç¯„åœ
  random_erasing_prob: 0.4  # æ›´æ¿€é€² erasing
  h_flip_prob: 0.5  # æ°´å¹³ç¿»è½‰
  v_flip_prob: 0.0  # ä¸å‚ç›´ç¿»è½‰ï¼ˆé†«å­¸å½±åƒç‰¹æ€§ï¼‰

# Loss - å„ªåŒ–é…ç½®
loss:
  type: improved_focal
  focal_alpha: [1.0, 1.5, 2.0, 12.0]  # COVID-19 æ¬Šé‡ 12
  focal_gamma: 3.5  # å°ˆæ³¨å›°é›£æ¨£æœ¬
  label_smoothing: 0.15  # ğŸ”¥ æ›´å¼· smoothing (å† è»ç”¨ 0.15-0.2)

# å­¸ç¿’ç‡èª¿åº¦
scheduler:
  type: cosine
  warmup_epochs: 3
  min_lr: 0.000001

# SWA - Stochastic Weight Averaging
swa:
  use_swa: true
  swa_start_epoch: 30  # æœ€å¾Œ 10 epochs
  swa_lr: 0.00005

# è¼¸å‡º
out:
  dir: outputs/v2l_512_breakthrough/fold{fold}
  submission_path: data/submission_v2l_512_fold{fold}.csv
